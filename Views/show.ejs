<%- include('Partials/header') %>
<link rel="stylesheet" href="/Stylesheet/show.css">
<script defer src="/Javascript/show.js"></script>

<div class="container py-5">
  <h2 class="medicine-list mb-4">Medicine List</h2>

  <!-- Search + Low Stock + Add Medicine on one line -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div class="d-flex gap-2">
      <input type="text" id="medicineSearch" class="form-control search-input" placeholder="Search medicine by name..." style="min-width: 250px;">
      <button id="searchButton" class="btn btn-search">Search</button>
      <button id="lowStockButton" class="btn btn-warning" title="Toggle Low Stock Medicines">Low Stock</button>
    </div>

    <a href="/add" class="btn btn-success">
      <i class="fas fa-plus me-2"></i>Add Medicine
    </a>
  </div>

  <!-- Table -->
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-bordered table-hover align-middle mb-0">
      <thead class="table-dark">
        <tr>
          <th scope="col">Medicine Name</th>
          <th scope="col">Category</th>
          <th scope="col">Price (Rs)</th>
          <th scope="col">Stock</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody id="medicineTableBody">
        <% medicines.forEach(medicine => { %>
        <tr>
          <td>
            <i class="fas fa-pills text-secondary me-2"></i><%= medicine.name %>
          </td>
          <td><%= medicine.category %></td>
          <td><%= medicine.price %></td>
          <td class="<%= medicine.stock < 10 ? 'low-stock text-danger fw-bold' : 'text-success' %>">
            <%= medicine.stock %>
          </td>
          <td>
            <a href="/edit?id=<%= medicine._id %>" class="btn btn-sm btn-primary me-2">
              <i class="fas fa-edit"></i> Edit
            </a>
            <a href="/delete-confirm?id=<%= medicine._id %>" class="btn btn-sm btn-danger">
              <i class="fas fa-trash"></i> Delete
            </a>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>


<%- include('Partials/footer') %>
